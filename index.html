<html>
    <title> INFO5100 Final Proj</title>
    <head>
    	<script src="https://d3js.org/d3.v4.min.js"></script>
    </head>

    <body>
        <div id = "userInputs">
			<svg id = "p1" width = "400" height = "400"></svg>
			<svg id = "animation" width = "400" height = "600"></svg>
        </div>
	<script>
		var fake_start = 100000;
		var fake_end = {"stock":[2000, 20000, 20000], "housing": 2000, "bound": 2000}
		var fake_obj = {"stock":[{"company1":0.1}, 
							{"company2":0.1}, 
							{"company3":0.3}, 
							{"company4":0.15},
							{"company5": 0.05}], 
						"housing": 0.2, 
						"bound": 0.1};
		var color_scheme = ["black", "grey", "pink", "green", "yellow", "red", "blue","pink"];

	    draw_money("animation", fake_start, fake_obj, color_scheme);

		function draw_money(id, start_amount, ratio_obj, colors) {
			var svg = d3.select("#" + id);
			var width = 400;
			var height = 600;
			var padding = 30;
			
			// generate center names based on input object
			var centers = [];
			if (ratio_obj.housing > 0) {
				centers.push("housing");
				console.log(ratio_obj.stock)
			}
			if (ratio_obj.bound > 0) {
				centers.push("bound");

			}
			if (ratio_obj.stock.length >0) {
				for (var i = 0; i< ratio_obj.stock.length; i++) {
					centers.push(Object.keys(ratio_obj.stock[i])[0]);
				}
			}
			

			// generate the coordinates for each activity's centroids
			var centroids = {};
			var origin_position = { x:(width-padding) * 0.33, y: height/2, color: colors[0]};
			// assign positions to different invest options
    		centers.forEach(function(center, i) {
				centroids[center] = { x: (width-padding) * 0.67,
									y: (height - padding)/centers.length*(i+1),
									color: colors[i+1] };
			});
			console.log("centroids are ", centroids)
			// generate data objs
			var invest_counts = [];
			var all_companies = Object.keys(ratio_obj.stock);
			for (var i = 0; i< all_companies.length; i++){
				var curr_count = parseInt(ratio_obj.stock.all_companies[i]* 100); //change 100 to the total number of nodes available
				for (var j = 0; j< curr_count; j++) {
					tmp_obj = {}
				}

			}
			var nodes = unique_ids.map(function(i) {
				var tmp_id = i;        
				var tmp_data = sched_objs.filter(function(d) {return d.id == tmp_id;});
				console.log(tmp_data)
				var all_durations = tmp_data.map(function(i) {return parseInt(i.duration);});
				
				var tmp_move = all_durations.indexOf(start_year);
				var tmp_opa = 1;
				if (tmp_move >= 0) {
					tmp_opa = 0.99;
					var tmp_radius = radius_scale(tmp_data[tmp_move].ev);
				}
				else {
					tmp_opa = 0;
					var tmp_radius = 10;
				}
				console.log(tmp_opa)
				if (tmp_move < 0) tmp_move = tmp_data.length - 1;
				var act = tmp_data[tmp_move].act; 
				var init_x = parties[act].x + Math.random();
				var init_y = parties[act].y + Math.random();
			
				var tmp_obj = {
					act: act,
					radius: tmp_radius,
					opa: tmp_opa,
					x: init_x,
					y: init_y,
					color: colors[tmp_data[tmp_move].act],
					moves: tmp_move,
					duration: parseInt(tmp_data[tmp_move].duration),
					data_obj: tmp_data,
					state: tmp_id
				}
				return tmp_obj;
			});
		}
		
		

	</script>


    </body>
</html>